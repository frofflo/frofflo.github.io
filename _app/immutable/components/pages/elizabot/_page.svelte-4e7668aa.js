import{S as j,i as q,s as H,a as T,k as P,q as I,c as S,l as K,m as A,r as R,h as x,n as b,b as F,D as w,O as Q,B as L,I as G,o as N,P as C,u as B}from"../../../chunks/index-1141e785.js";import{p as O}from"../../../chunks/parse-c28c2630.js";import{d as E}from"../../../chunks/singletons-6eba404b.js";import{e as U}from"../../../chunks/elizadata-e7e5fdf8.js";/* empty css                               */E.disable_scroll_handling;E.goto;E.invalidate;const V=E.invalidateAll;E.prefetch;E.prefetch_routes;E.before_navigate;E.after_navigate;const J=E.apply_action;function Y(e){const t=JSON.parse(e);return t.data&&(t.data=O(t.data)),t}function W(e,t=()=>{}){const s=async({action:i,result:p,reset:f})=>{p.type==="success"&&(f!==!1&&HTMLFormElement.prototype.reset.call(e),await V()),(location.origin+location.pathname===i.origin+i.pathname||p.type==="redirect"||p.type==="error")&&J(p)};async function h(i){var g,o,d,u,_;i.preventDefault();const p=new URL((g=i.submitter)!=null&&g.hasAttribute("formaction")?i.submitter.formAction:HTMLFormElement.prototype.cloneNode.call(e).action),f=new FormData(e),y=(o=i.submitter)==null?void 0:o.getAttribute("name");y&&f.append(y,(u=(d=i.submitter)==null?void 0:d.getAttribute("value"))!=null?u:"");const l=new AbortController;let c=!1;const v=(_=await t({action:p,cancel:()=>c=!0,controller:l,data:f,form:e}))!=null?_:s;if(c)return;let a;try{const z=await fetch(p,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:f,signal:l.signal});a=Y(await z.text())}catch(z){if((z==null?void 0:z.name)==="AbortError")return;a={type:"error",error:z}}v({action:p,data:f,form:e,update:z=>s({action:p,result:a,reset:z==null?void 0:z.reset}),result:a,get type(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get location(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get error(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")}})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",h),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",h)}}}var r=U;function m(e){this.noRandom=!!e,this.capitalizeFirstLetter=!0,this.debug=!1,this.memSize=20,this.version="1.1 (original)",this._dataParsed||this._init(),this.reset()}m.prototype.reset=function(){this.quit=!1,this.mem=[],this.lastchoice=[];for(var e=0;e<r.elizaKeywords.length;e++){this.lastchoice[e]=[];for(var t=r.elizaKeywords[e][2],s=0;s<t.length;s++)this.lastchoice[e][s]=-1}};m.prototype._dataParsed=!1;m.prototype._init=function(){var e={};if(r.elizaSynons&&typeof r.elizaSynons=="object")for(var t in r.elizaSynons)e[t]="("+t+"|"+r.elizaSynons[t].join("|")+")";(!r.elizaKeywords||typeof r.elizaKeywords.length>"u")&&(r.elizaKeywords=[["###",0,[["###",[]]]]]);for(var s=/@(\S+)/,h=/(\S)\s*\*\s*(\S)/,i=/^\s*\*\s*(\S)/,p=/(\S)\s*\*\s*$/,f=/^\s*\*\s*$/,y=/\s+/g,l=0;l<r.elizaKeywords.length;l++){var c=r.elizaKeywords[l][2];r.elizaKeywords[l][3]=l;for(var t=0;t<c.length;t++){var n=c[t];if(n[0].charAt(0)=="$"){for(var v=1;n[0].charAt[v]==" ";)v++;n[0]=n[0].substring(v),n[2]=!0}else n[2]=!1;for(var a=s.exec(n[0]);a;){var g=e[a[1]]?e[a[1]]:a[1];n[0]=n[0].substring(0,a.index)+g+n[0].substring(a.index+a[0].length),a=s.exec(n[0])}if(f.test(n[0]))n[0]="\\s*(.*)\\s*";else{if(a=h.exec(n[0]),a){for(var o="",d=n[0];a;)o+=d.substring(0,a.index+1),a[1]!=")"&&(o+="\\b"),o+="\\s*(.*)\\s*",a[2]!="("&&a[2]!="\\"&&(o+="\\b"),o+=a[2],d=d.substring(a.index+a[0].length),a=h.exec(d);n[0]=o+d}if(a=i.exec(n[0]),a){var o="\\s*(.*)\\s*";a[1]!=")"&&a[1]!="\\"&&(o+="\\b"),n[0]=o+n[0].substring(a.index-1+a[0].length)}if(a=p.exec(n[0]),a){var o=n[0].substring(0,a.index+1);a[1]!="("&&(o+="\\b"),n[0]=o+"\\s*(.*)\\s*"}}n[0]=n[0].replace(y,"\\s+"),y.lastIndex=0}}if(r.elizaKeywords.sort(this._sortKeywords),m.prototype.pres={},m.prototype.posts={},r.elizaPres&&r.elizaPres.length){for(var u=new Array,t=0;t<r.elizaPres.length;t+=2)u.push(r.elizaPres[t]),m.prototype.pres[r.elizaPres[t]]=r.elizaPres[t+1];m.prototype.preExp=new RegExp("\\b("+u.join("|")+")\\b")}else m.prototype.preExp=/####/,m.prototype.pres["####"]="####";if(r.elizaPosts&&r.elizaPosts.length){for(var u=new Array,t=0;t<r.elizaPosts.length;t+=2)u.push(r.elizaPosts[t]),m.prototype.posts[r.elizaPosts[t]]=r.elizaPosts[t+1];m.prototype.postExp=new RegExp("\\b("+u.join("|")+")\\b")}else m.prototype.postExp=/####/,m.prototype.posts["####"]="####";(!r.elizaQuits||typeof r.elizaQuits.length>"u")&&(r.elizaQuits=[]),m.prototype._dataParsed=!0};m.prototype._sortKeywords=function(e,t){return e[1]>t[1]?-1:e[1]<t[1]||e[3]>t[3]?1:e[3]<t[3]?-1:0};m.prototype.transform=function(e){var t="";this.quit=!1,e=e.toLowerCase(),e=e.replace(/@#\$%\^&\*\(\)_\+=~`\{\[\}\]\|:;<>\/\\\t/g," "),e=e.replace(/\s+-+\s+/g,"."),e=e.replace(/\s*[,\.\?!;]+\s*/g,"."),e=e.replace(/\s*\bbut\b\s*/g,"."),e=e.replace(/\s{2,}/g," ");for(var s=e.split("."),h=0;h<s.length;h++){var i=s[h];if(i!=""){for(var p=0;p<r.elizaQuits.length;p++)if(r.elizaQuits[p]==i)return this.quit=!0,this.getFinal();var f=this.preExp.exec(i);if(f){for(var y="",l=i;f;)y+=l.substring(0,f.index)+this.pres[f[1]],l=l.substring(f.index+f[0].length),f=this.preExp.exec(l);i=y+l}this.sentence=i;for(var c=0;c<r.elizaKeywords.length;c++)if(i.search(new RegExp("\\b"+r.elizaKeywords[c][0]+"\\b","i"))>=0&&(t=this._execRule(c)),t!="")return t}}if(t=this._memGet(),t==""){this.sentence=" ";var c=this._getRuleIndexByKey("xnone");c>=0&&(t=this._execRule(c))}return t!=""?t:"I am at a loss for words."};m.prototype._execRule=function(e){for(var t=r.elizaKeywords[e],s=t[2],h=/\(([0-9]+)\)/,i=0;i<s.length;i++){var p=this.sentence.match(s[i][0]);if(p!=null){var f=s[i][1],y=s[i][2],l=this.noRandom?0:Math.floor(Math.random()*f.length);this.noRandom&&this.lastchoice[e][i]>l||this.lastchoice[e][i]==l?(l=++this.lastchoice[e][i],l>=f.length&&(l=0,this.lastchoice[e][i]=-1)):this.lastchoice[e][i]=l;var c=f[l];if(this.debug&&alert(`match:
key: `+r.elizaKeywords[e][0]+`
rank: `+r.elizaKeywords[e][1]+`
decomp: `+s[i][0]+`
reasmb: `+c+`
memflag: `+y),c.search("^goto ","i")==0){var n=this._getRuleIndexByKey(c.substring(5));if(n>=0)return this._execRule(n)}var v=h.exec(c);if(v){for(var a="",g=c;v;){var o=p[parseInt(v[1])],d=this.postExp.exec(o);if(d){for(var u="",_=o;d;)u+=_.substring(0,d.index)+this.posts[d[1]],_=_.substring(d.index+d[0].length),d=this.postExp.exec(_);o=u+_}a+=g.substring(0,v.index)+o,g=g.substring(v.index+v[0].length),v=h.exec(g)}c=a+g}if(c=this._postTransform(c),y)this._memSave(c);else return c}}return""};m.prototype._postTransform=function(e){if(e=e.replace(/\s{2,}/g," "),e=e.replace(/\s+\./g,"."),r.elizaPostTransforms&&r.elizaPostTransforms.length)for(var t=0;t<r.elizaPostTransforms.length;t+=2)e=e.replace(r.elizaPostTransforms[t],r.elizaPostTransforms[t+1]),r.elizaPostTransforms[t].lastIndex=0;if(this.capitalizeFirstLetter){var s=/^([a-z])/,h=s.exec(e);h&&(e=h[0].toUpperCase()+e.substring(1))}return e};m.prototype._getRuleIndexByKey=function(e){for(var t=0;t<r.elizaKeywords.length;t++)if(r.elizaKeywords[t][0]==e)return t;return-1};m.prototype._memSave=function(e){this.mem.push(e),this.mem.length>this.memSize&&this.mem.shift()};m.prototype._memGet=function(){if(this.mem.length){if(this.noRandom)return this.mem.shift();for(var e=Math.floor(Math.random()*this.mem.length),t=this.mem[e],s=e+1;s<this.mem.length;s++)this.mem[s-1]=this.mem[s];return this.mem.length--,t}else return""};m.prototype.getFinal=function(){return r.elizaFinals?r.elizaFinals[Math.floor(Math.random()*r.elizaFinals.length)]:""};m.prototype.getInitial=function(){return r.elizaInitials?r.elizaInitials[Math.floor(Math.random()*r.elizaInitials.length)]:""};typeof Array.prototype.push>"u"&&(Array.prototype.push=function(e){return this[this.length]=e});typeof Array.prototype.shift>"u"&&(Array.prototype.shift=function(){if(this.length==0)return null;for(var e=this[0],t=1;t<this.length;t++)this[t-1]=this[t];return this.length--,e});var X=m;function D(e,t,s){const h=e.slice();return h[4]=t[s],h[6]=s,h}function $(e){let t,s,h=e[4].user+"",i,p,f=e[0][e[6]].text+"",y,l,c;return{c(){t=P("article"),s=P("span"),i=I(h),p=I(": "),y=I(f),l=T(),this.h()},l(n){t=K(n,"ARTICLE",{class:!0});var v=A(t);s=K(v,"SPAN",{});var a=A(s);i=R(a,h),p=R(a,": "),y=R(a,f),a.forEach(x),l=S(v),v.forEach(x),this.h()},h(){b(t,"class",c=C(e[4].user)+" svelte-1vfysrz")},m(n,v){F(n,t,v),w(t,s),w(s,i),w(s,p),w(s,y),w(t,l)},p(n,v){v&1&&h!==(h=n[4].user+"")&&B(i,h),v&1&&f!==(f=n[0][n[6]].text+"")&&B(y,f),v&1&&c!==(c=C(n[4].user)+" svelte-1vfysrz")&&b(t,"class",c)},d(n){n&&x(t)}}}function Z(e){let t,s,h,i,p,f,y,l,c,n,v,a=e[0],g=[];for(let o=0;o<a.length;o+=1)g[o]=$(D(e,a,o));return{c(){t=T(),s=P("div"),h=P("h1"),i=I("Chat GTP (frfr)"),p=T(),f=P("div");for(let o=0;o<g.length;o+=1)g[o].c();y=T(),l=P("form"),c=P("input"),this.h()},l(o){t=S(o),s=K(o,"DIV",{class:!0});var d=A(s);h=K(d,"H1",{});var u=A(h);i=R(u,"Chat GTP (frfr)"),u.forEach(x),p=S(d),f=K(d,"DIV",{class:!0});var _=A(f);for(let M=0;M<g.length;M+=1)g[M].l(_);_.forEach(x),y=S(d),l=K(d,"FORM",{name:!0,method:!0});var z=A(l);c=K(z,"INPUT",{type:!0,name:!0,id:!0}),z.forEach(x),d.forEach(x),this.h()},h(){b(f,"class","scrollable"),b(c,"type","text"),b(c,"name","text"),b(c,"id","text"),b(l,"name","myForm"),b(l,"method","post"),b(s,"class","container")},m(o,d){F(o,t,d),F(o,s,d),w(s,h),w(h,i),w(s,p),w(s,f);for(let u=0;u<g.length;u+=1)g[u].m(f,null);w(s,y),w(s,l),w(l,c),n||(v=Q(W.call(null,l,e[2])),n=!0)},p(o,[d]){if(d&1){a=o[0];let u;for(u=0;u<a.length;u+=1){const _=D(o,a,u);g[u]?g[u].p(_,d):(g[u]=$(_),g[u].c(),g[u].m(f,null))}for(;u<g.length;u+=1)g[u].d(1);g.length=a.length}},i:L,o:L,d(o){o&&x(t),o&&x(s),G(g,o),n=!1,v()}}}function k(e,t,s){let h=new X,i=[{user:"Eliza",text:h.getInitial()}];async function p(y){i.push({user:"You",text:y}),s(0,i),h.quit&&h.getFinal(),await new Promise(l=>setTimeout(l,1e3+Math.random()*1e3)),i.push({user:"Eliza",text:h.transform(y)}),s(0,i),await new Promise(l=>setTimeout(l,1e3+Math.random()*1e3)),h.quit&&location.reload()}return N(()=>{window.onbeforeunload=function(){h.reset()}}),[i,p,({data:y,cancel:l})=>{l();const c=y.get("text");p(c),document.getElementById("text").value=""}]}class ie extends j{constructor(t){super(),q(this,t,k,Z,H,{})}}export{ie as default};
